<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="./css/reset.css">
  <link rel="stylesheet" href="./css/styles.css">
  <title>酷我音乐-无损音质正版在线试听网站</title>
</head>
<body>
<div class="container">
  <div class="sub-nav">
    <a href="javascript:" class="current"><span>推荐</span></a>
    <a href="javascript:"><span>排行榜</span></a>
    <a href="javascript:"><span>歌手</span></a>
    <a href="javascript:"><span>歌单</span></a>
    <a href="javascript:"><span>MV</span></a>
  </div>
  <div class="main">
    <div class="banner-out">
      <div class="swiper-out">
        <div class="swiper-inn">
          <div class="swiper-container">
            <!-- ondragstart="return false" 禁止鼠标选中后拖动有半透明图片跟随 -->
            <div class="swiper-wrapper" style="left: -1400px" ondragstart="return false">
              <div class="swiper-slide">
                <a href="https://www.kuwo.cn/playlist_detail/3460417394"><img src="./source/img/1684069467445_.jpg" alt></a>
              </div>
              <div class="swiper-slide">
                <a href=""><img src="./source/img/1677749209264_.png" alt></a>
              </div>
              <div class="swiper-slide">
                <a href="https://www.kuwo.cn/playlist_detail/3480039720"><img src="./source/img/1689402762005_.jpg" alt></a>
              </div>
              <div class="swiper-slide">
                <a href="https://www.kuwo.cn/playlist_detail/3468351866"><img src="./source/img/1689402854175_.jpg" alt></a>
              </div>
              <div class="swiper-slide">
                <a href="https://www.kuwo.cn/playlist_detail/3464313714"><img src="./source/img/1689330791866_.jpg" alt></a>
              </div>
              <div class="swiper-slide">
                <a href="https://www.kuwo.cn/playlist_detail/3467025335"><img src="./source/img/1689303067197_.jpg" alt></a>
              </div>
              <div class="swiper-slide">
                <a href="https://www.kuwo.cn/playlist_detail/3460417394"><img src="./source/img/1684069467445_.jpg" alt></a>
              </div>
              <div class="swiper-slide">
                <a href=""><img src="./source/img/1677749209264_.png" alt></a>
              </div>
            </div>
            <div class="swiper-pagination">
              <ul class="swiper-bullets"></ul>
            </div>
            <div class="BtnL"><i><</i></div>
            <div class="BtnR"><i>></i></div>
          </div>
        </div>
        <div class="blur">
          <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="200%" viewBox="0 0 1680 480" preserveAspectRatio="none">
            <defs>
              <filter id="blur">
                <feGaussianBlur in="SourceGraph" stdDeviation="30"></feGaussianBlur>
              </filter>
            </defs>
            <image href="./source/img/1677749209264_.png" x="0" y="-400" width="100%" height="200%" externalResourcesRequired="true" preserveAspectRatio="none" style="filter: ;display: none" externalresourcesrequired="true"></image>
            <image href="./source/img/1689402762005_.jpg" x="0" y="-400" width="100%" height="200%" externalResourcesRequired="true" preserveAspectRatio="none" style="filter: ;display: none" externalresourcesrequired="true"></image>
            <image href="./source/img/1689402854175_.jpg" x="0" y="-400" width="100%" height="200%" externalResourcesRequired="true" preserveAspectRatio="none" style="filter: ;display: none" externalresourcesrequired="true"></image>
            <image href="./source/img/1689330791866_.jpg" x="0" y="-400" width="100%" height="200%" externalResourcesRequired="true" preserveAspectRatio="none" style="filter: ;display: none" externalresourcesrequired="true"></image>
            <image href="./source/img/1689303067197_.jpg" x="0" y="-400" width="100%" height="200%" externalResourcesRequired="true" preserveAspectRatio="none" style="filter: ;display: none" externalresourcesrequired="true"></image>
            <image href="./source/img/1684069467445_.jpg" x="0" y="-400" width="100%" height="200%" externalResourcesRequired="true" preserveAspectRatio="none" style="filter: ;display: none" externalresourcesrequired="true"></image>
          </svg>
        </div>
      </div>
      <div class="download">
        <ul class="btns">
          <li><a href=""><i></i><span>下载PC版</span></a></li>
          <li class="split"></li>
          <li class="downloadAndroid"><a href="javascript:"><i></i><span>下载Android版</span></a></li>
          <li class="split"></li>
          <li class="downloadIphone"><a href="javascript:"><i></i><span>下载iphone版</span></a></li>
          <li class="split"></li>
          <li><a href="https://www.kuwo.cn/down"><i></i><span>下载其他版本</span></a></li>
        </ul>
      </div>
    </div>
    <div class="model" style="display: none">
      <div class="title">
        <span class="androidTitle" style>酷我音乐Android最新版</span>
        <span class="iphoneTitle" style="display: none">酷我音乐iphone最新版</span>
        <i class="close">x</i>
      </div>
      <div class="content">
        <div class="btns">
          <div class="button-container"><a href=""><i></i>下载安装包</a></div>
          <div class="split"></div>
          <div class="img-container">
            <img src="./source/img/Snipaste_2023-07-21_15-27-50.png" alt>
            <p class="tip">扫描二维码下载</p>
          </div>
        </div>
      </div>
    </div>
    <div class="song-list">
      <div class="song-list-nav">
        <h3>推荐歌单</h3>
        <div class="sub-nav">
          <a href="javascript:" class="current"><span>每日推荐</span></a>
          <a href="javascript:"><span>翻唱</span></a>
          <a href="javascript:"><span>网络</span></a>
          <a href="javascript:"><span>伤感</span></a>
          <a href="javascript:"><span>欧美</span></a>
        </div>
        <a href="https://www.kuwo.cn/playlists" class="song-list-more">更多<i>></i></a>
      </div>
      <div class="song-list-content">
        <div class="item">
          <div class="pic-out">
            <div class="cover"></div>
            <div class="item-img"></div>
          </div>
          <p class="name"></p>
          <p class="count"></p>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
<script>
/* 顶部标签动态选中样式 */
  var subNavTitle = document.querySelector('.sub-nav').querySelectorAll('a');
  (function () {
    for (var i = 0; i < subNavTitle.length; i++) {
      (function (i) {
        subNavTitle[i].addEventListener('click', function () {
          for (var t = 0; t < subNavTitle.length; t++) {
            subNavTitle[t].classList = ''
          }
          subNavTitle[i].classList.add('current')
        })
      })(i)
    }
  })()
  
  
/* 顶部滚动轮播图 */
  var box = document.getElementsByClassName('swiper-container')[0]
  var BtnL = document.getElementsByClassName('BtnL')[0]
  var BtnR = document.getElementsByClassName('BtnR')[0]
  var swiperWrapper = document.getElementsByClassName('swiper-wrapper')[0]
  var swiperSlide = document.getElementsByClassName('swiper-slide')
  var swiperBullets = document.getElementsByClassName('swiper-bullets')[0]
  var blur = document.getElementsByTagName('image')
  var counter = 1
  var circle = 0
  var flag = true
  var timer = undefined
  
  // 定时器
  var play = function() {
    timer = setInterval(function() {
      BtnR.click()
    }, 5000)
  }
  play()
  
  // 鼠标悬停时停止轮播, 移出时恢复轮播
  box.onmouseover = function() {
    clearInterval(timer)
  }
  box.onmouseleave = function() {
    play()
  };
  swiperWrapper.onmousedown = function () {
    clearInterval(timer)
  };
  // 动态生成按钮 按钮点击逻辑
    /* 7张图对应5个按钮, 需要分别设置状态, 判断两个边界时直接改值 */
  (function () {
    for (var i = 0; i < swiperSlide.length - 2; i++) {
      var span = document.createElement('span')
      span.className = 'current'
      span.setAttribute('index', i)
      swiperBullets.appendChild(span)
      span.addEventListener('click', function () {
        for (var i = 0; i < swiperBullets.children.length; i++) {
          swiperBullets.children[i].className = 'current'
        }
        this.className = 'current white'
        var index = parseInt(this.getAttribute('index')) + 1
        swiperWrapper.style.left = -1400 * index + 'px'
        circle = index - 1
        counter = index
      })
    }
  })()
  swiperBullets.children[0].className = 'current white'
  blur[0].style.display = 'block'
  blur[0].style.filter = 'url(#blur)'
  
  function circleChange() {
    (function () {
      for (var i = 0; i < swiperBullets.children.length; i++) {
        swiperBullets.children[i].className = 'current'
        blur[i].style.display = 'none'
        blur[i].style.filter = ""
      }
      swiperBullets.children[circle].className = 'current white'
      blur[circle].style.display = 'block'
      blur[circle].style.filter = 'url(#blur)'
    })()
  }
  
  BtnL.addEventListener('click', function () {
    if (flag) {
      flag = false
      if (counter > 0) {
        swiperWrapper.style.left = parseInt(swiperWrapper.style.left) + 1400 + 'px'
        counter--
        flag = true
        circle--
        if (circle < 0) {
          circle = swiperBullets.children.length - 1
        }
        circleChange()
      } else {
        swiperWrapper.style.transition = 'none'
        swiperWrapper.style.left = '-8400px'
        setTimeout(() => {
          swiperWrapper.style.transition = 'left 0.5s ease-in-out'
          swiperWrapper.style.left = '-7000px'
        }, 300);
        counter = 5
        circle = 4
        flag = true
        circleChange()
      }
    }
    console.log(counter, 'lc')
    console.log(circle, 'lcircle')
    console.log(swiperWrapper.style.left)
  })
  BtnR.addEventListener('click', function () {
    if (flag) {
      flag = false
      if (counter < 7) {
        swiperWrapper.style.left = parseInt(swiperWrapper.style.left) - 1400 + 'px'
        counter++
        flag = true
        circle++
        if (circle > swiperBullets.children.length - 1) {
          circle = 0
        }
        circleChange()
      } else {
        swiperWrapper.style.transition = 'none'
        swiperWrapper.style.left = '-1400px'
        setTimeout(() => {
          swiperWrapper.style.transition = 'left 0.5s ease-in-out'
          swiperWrapper.style.left = '-2800px'
        }, 300)
        circle = 1
        counter = 2
        flag = true
        circleChange()
      }
    }
    console.log(counter, 'rc')
    console.log(circle, 'rcircle')
    console.log(swiperWrapper.style.left)
  })
  // 拖动超过一半触发点击事件
  var currentLeft
  var downMouseLeft
  var currentMouseLeft
  var swiperJudge = false
  swiperWrapper.addEventListener('mousedown', function (e) {
    swiperJudge = true
    swiperWrapper.style.transition = 'none'
    currentLeft = parseInt(swiperWrapper.style.left)
    downMouseLeft = e.clientX
    window.addEventListener('mousemove', move)
  })
    /* move事件绑定到window上,避免滑动时超出容器导致后续操作不生效 */
  function move (e) {
    clearInterval(timer)
    if(counter === 0 && (e.clientX - downMouseLeft) > 0) {}
    else if (counter === 7 && (e.clientX - downMouseLeft) < 0) {}
    else { swiperWrapper.style.left = currentLeft - downMouseLeft + e.clientX + 'px' }
  }
  window.addEventListener('mouseup', function (e) {
    if (swiperJudge === true) {
      var upMouseLeft = e.clientX
      window.removeEventListener('mousemove', move)
      swiperWrapper.style.transition = 'left 0.5s ease-in-out'
      if (upMouseLeft - downMouseLeft > 800) {
        swiperWrapper.style.left = currentLeft + 'px'
        BtnL.click()
      } else if (upMouseLeft - downMouseLeft < -800){
        swiperWrapper.style.left = currentLeft + 'px'
        BtnR.click()
      } else {
        swiperWrapper.style.left = currentLeft + 'px'
      }
      play()
    }
    swiperJudge = false
  })

/* 视窗浮动下载框 */
  var model = document.getElementsByClassName('model')[0]
  var close = document.getElementsByClassName('close')[0]
  var downloadAndroid = document.getElementsByClassName('downloadAndroid')[0]
  var downloadIphone = document.getElementsByClassName('downloadIphone')[0]
  var androidTitle = document.getElementsByClassName('androidTitle')[0]
  var iphoneTitle = document.getElementsByClassName('iphoneTitle')[0]
  close.addEventListener('click', function() {
    model.style.display = 'none'
  })
  downloadAndroid.addEventListener('click', function() {
    model.style.display = 'block'
    androidTitle.style.display = 'inline-block'
    iphoneTitle.style.display = 'none'
  })
  downloadIphone.addEventListener('click', function() {
    model.style.display = 'block'
    iphoneTitle.style.display = 'inline-block'
    androidTitle.style.display = 'none'
  })
  
/* 推荐歌单栏标签动态选中效果 */
  var playListTitle = document.querySelectorAll('.sub-nav')[1].querySelectorAll('a');
  (function () {
    for (var i = 0; i < playListTitle.length; i++) {
      (function (i) {
        playListTitle[i].addEventListener('click', function () {
          for (var t = 0; t < playListTitle.length; t++) {
            playListTitle[t].classList = ''
          }
          playListTitle[i].classList.add('current')
        })
      })(i)
    }
  })()

</script>
</html>
