<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  /* 顶部标签切换 */
  var mainButton = document.querySelector('.sub-nav').querySelectorAll('a')
  var main = document.querySelectorAll('.main-container')
  var page = 1
  var commentPage = 1
  var clickjudge = [0, 0, 0, 0, 0]
  var rankList = document.querySelector('.rank-list');
  for (var i = 0; i < mainButton.length; i++) {
    (function (i) {
      mainButton[i].addEventListener('click', function () {
        for (var j = 0; j < main.length; j++) {
          main[j].style.display = 'none'
        }
        main[i].style.display = 'block'
        currentPage = i
        switch (i) {
          case 0:
            if (clickjudge[i] === 0) {
              clickjudge[i]++;
              judgeArtist = true
              judgeDevice = true
              var itemsDevice = document.querySelector('.song-list-device').querySelectorAll('.item');
              (function () {
                for (var k = 0;k < 5; k++) {
                  var img = itemsDevice[k].querySelector('img')
                  img.src = './source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png'
                }
              })()
              axios.get('http://localhost:3000/playList').then(data => {
                (function () {
                  for (var i = 0; i < data.length && i < itemsDevice.length; i++) {
                    var name = itemsDevice[i].querySelector('.name')
                    var count = itemsDevice[i].querySelector('.count')
                    var img = itemsDevice[i].querySelector('img')
                    name.innerHTML = data[i].name
                    count.innerHTML = filterNum(data[i].listencnt)
                    img.src = (data[i].img).toString()
                  }
                })()
              })
            }
            break
          case 1:
            if (clickjudge[i] === 0) {
              clickjudge[i]++;
              /* 处理歌曲列表首次加载 */
              judgeHotComment = true
              var website = 'http://localhost:3000/musicList?' + '_page=' + page + '&_limit=20'
              axios.get(website).then(data => {
                (function() {
                  for (var i = 0; i < data.length; i++) {
                    var itemSong = `
                      <li class="song-item">
                        <div class="song-rank">
                          <div class="rank-num"></div>
                          <img src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                        </div>
                        <div class="song-name">
                          <a href="">${data[i].name}</a>
                        </div>
                        <div class="song-artist">
                          <span>${data[i].artist}</span>
                        </div>
                        <div class="song-album">
                          <span>${data[i].album}</span>
                        </div>
                        <div class="song-time">
                          <span>${filterNum(data[i].duration, 2)}</span>
                        </div>
                        <div class="btns">
                          <i></i>
                          <i></i>
                          <i></i>
                          <i></i>
                        </div>
                      </li>`
                    rankList.innerHTML += itemSong
                  }
                  /* 排行榜右侧歌曲列表斑马纹以及序号 */
                  var songItems = document.querySelectorAll('.song-item');
                  (function() {
                    for (var i = 0; i < songItems.length; i++) {
                      if (i%2 !== 0) {
                        songItems[i].style.backgroundColor = '#FAFAFA'
                        songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#FAFAFA'
                      }
                      (function(i) {
                        songItems[i].addEventListener('mouseenter', function() {
                          songItems[i].style.backgroundColor = '#F5F5F5'
                          songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#F5F5F5'
                        })
                        songItems[i].addEventListener('mouseleave', function() {
                          if (i%2 !== 0) {
                            songItems[i].style.backgroundColor = '#FAFAFA'
                            songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#FAFAFA'
                          } else {
                            songItems[i].style.backgroundColor = '#FFF'
                            songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#FFF'
                          }
                        })
                      })(i)
                    }
                    for (var k = 0; k < songItems.length; k++) {
                      var img = songItems[k].querySelector('img')
                      img.src = './source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png'
                    }
                  })()
                })()
                return data
              }).then(data => {
                var itemsSong = document.querySelector('.rank-list').querySelectorAll('.song-item')
                loadingMask.style.display = 'none'
                for (var i = 0; i < data.length; i++) {
                  if (i > 2) {
                    var rankNums = itemsSong[i].querySelector('.song-rank').querySelector('.rank-num')
                    rankNums.innerHTML = i+1
                  }
                  var songName = itemsSong[i].querySelector('.song-name')
                  var songNameA = itemsSong[i].querySelector('.song-name').querySelector('a')
                  var songArtist = itemsSong[i].querySelector('.song-artist').querySelector('span')
                  var songAlbum = itemsSong[i].querySelector('.song-album').querySelector('span')
                  var songTime = itemsSong[i].querySelector('.song-time').querySelector('span')
                  var songRank = itemsSong[i].querySelector('.song-rank')
                  songNameA.innerHTML = data[i].name
                  songArtist.innerHTML = data[i].artist
                  songAlbum.innerHTML = data[i].album
                  songTime.innerHTML = filterNum(data[i].duration, 2)
                  if (i < 3) {
                    switch (i) {
                      case 0:
                        songRank.innerHTML = `
                          <div class="rank-num" style="background: url(./source/img/icon_first.df06fb1.png) center 4px no-repeat; background-size: 168%;"></div>
                          <div class="gap"></div>
                          <img src="${data[i].pic}" alt>
                        `
                        break
                      case 1:
                        songRank.innerHTML = `
                          <div class="rank-num" style="background: url(./source/img/icon_secondary.d99e73e.png) center 4px no-repeat; background-size: 168%;"></div>
                          <div class="gap"></div>
                          <img src="${data[i].pic}" alt>
                        `
                        break
                      case 2:
                        songRank.innerHTML = `
                          <div class="rank-num" style="background: url(./source/img/icon_third.8abbb65.png) center 4px no-repeat; background-size: 168%;"></div>
                          <div class="gap"></div>
                          <img src="${data[i].pic}" alt>
                        `
                        break
                    }
                  } else {
                    songRank.innerHTML = `
                      <div class="rank-num">${i+1}</div>
                      <div class="gap"></div>
                      <img src="${data[i].pic}" alt>
                    `
                  }
                  if (data[i].hasLossless === true) {
                    songName.innerHTML += `<i class="wusun"></i>`
                  }
                  if (data[i].hasmv) {
                    songName.innerHTML += `<i class="mv"></i>`
                  }
                }
              })
              /* 处理评论列表加载 */
              commentPage = 1
              var allComment = document.querySelectorAll('.all-comment')[0]
              var allCommentCom = document.querySelectorAll('.all-comment')[1]
              axios.get('http://localhost:3000/hotComment').then(data => {
                for (var i = 0; i < data.length; i++) {
                  var hotCommentItem = `
                    <div class="comment-item">
                      <div class="avatar">
                        <img src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                      </div>
                      <div class="msg">
                        <div class="nickname">
                          <span></span>
                        </div>
                        <div class="text"></div>
                        <div class="time"></div>
                      </div>
                    </div>`
                  allComment.innerHTML += hotCommentItem
                }
              })
              axios.get('http://localhost:3000/commonComment').then(data => {
                for (var i = 0; i < data.length && i < 5; i++) {
                  var commonComment1 = `
                    <div class="comment-item">
                      <div class="avatar">
                        <img src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                      </div>
                      <div class="msg">
                        <div class="nickname">
                          <span></span>
                        </div>
                        <div class="text">回复<a href="javascript:"></a></div>
                        <div class="reply"></div>
                        <div class="time"></div>
                      </div>
                    </div>`
                  var commonComment2 = `
                    <div class="comment-item">
                      <div class="avatar">
                        <img src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                      </div>
                      <div class="msg">
                        <div class="nickname">
                          <span></span>
                        </div>
                        <div class="text"></div>
                        <div class="time"></div>
                      </div>
                    </div>`
                  if (data[i].reply) {
                    allCommentCom.innerHTML += commonComment1
                  } else {
                    allCommentCom.innerHTML += commonComment2
                  }
                }
              })
            }
            break
          case 2:
            if (clickjudge[i] === 0) {
              clickjudge[i]++
              var artistMain = document.querySelector('.artist-main')
              var artistOther = document.querySelector('.artist-other')
              axios.get('http://localhost:3000/artistInfo').then(data => {
                (function() {
                  for (var i = 0; i < data.length/60; i++) {
                    if (i === 0) {
                      artistInfoWrapper.innerHTML += `<li class="num current"><span>${i+1}</span></li>`
                    } else {
                      artistInfoWrapper.innerHTML += `<li class="num"><span>${i+1}</span></li>`
                    }
                  }
                })();
                (function () {
                  for (var i = 0; i < data.length; i++) {
                    if (i < 12) {
                      if ((i+1)%6 === 0 && (i+1) !== 0) {
                        artistMain.innerHTML += `
                        <div class="artist-item last">
                          <div class="artist">
                            <div class="pic-out">
                              <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                            </div>
                            <p class="name"><span>${data[i].name}</span></p>
                            <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                          </div>
                        </div>`
                      } else {
                        artistMain.innerHTML += `
                        <div class="artist-item">
                          <div class="artist">
                            <div class="pic-out">
                              <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                            </div>
                            <p class="name"><span>${data[i].name}</span></p>
                            <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                          </div>
                        </div>`
                      }
                    }
                    if (i >= 12 && i < 60) {
                      if ((i+1)%6 === 0 && (i+1) !== 0) {
                        artistOther.innerHTML += `
                        <div class="artist-item last">
                          <div class="img-out"><img data-src="${data[i].pic}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                          <span>${data[i].name}</span>
                        </div>`
                      } else {
                        artistOther.innerHTML += `
                        <div class="artist-item">
                          <div class="img-out"><img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                          <span>${data[i].name}</span>
                        </div>`
                      }
                    }
                  }
                })()
                var artistInfoItems = artistInfoWrapper.querySelectorAll('li');
                (function () {
                  for (var i = 0; i < artistInfoItems.length; i++) {
                    artistInfoItems[i].addEventListener('click', e => {
                      artistMain.innerHTML = ''
                      artistOther.innerHTML = '';
                      (function () {
                        for (var t = 0; t < artistInfoItems.length; t++) {
                          artistInfoItems[t].classList = ''
                        }
                      })();
                      (function(i){
                        artistInfoItems[i].classList.add('current')
                      })(i)
                      if (judgeFirst === true) {
                        secWebsiteArt = websiteArt + `?_page=${e.target.children.length ? +(e.target.children[0].innerHTML) : + (e.target.innerHTML)}&_limit=60`
                      } else {
                        secWebsiteArt = websiteArt + `&_page=${e.target.children.length ? +(e.target.children[0].innerHTML) : + (e.target.innerHTML)}&_limit=60`
                      }
                      axios.get(secWebsiteArt).then(data => {
                        if (artistInfoItems[i].children[0].innerHTML === '1') {
                          currentInfoPage = 1;
                          (function () {
                            for (var i = 0; i < data.length; i++) {
                              if (i < 12) {
                                if ((i+1)%6 === 0 && (i+1) !== 0) {
                                  artistMain.innerHTML += `
                                <div class="artist-item last">
                                  <div class="artist">
                                    <div class="pic-out">
                                      <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                                    </div>
                                    <p class="name"><span>${data[i].name}</span></p>
                                    <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                                  </div>
                                </div>`
                                } else {
                                  artistMain.innerHTML += `
                                <div class="artist-item">
                                  <div class="artist">
                                    <div class="pic-out">
                                      <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                                    </div>
                                    <p class="name"><span>${data[i].name}</span></p>
                                    <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                                  </div>
                                </div>`
                                }
                              }
                              if (i >= 12 && i < 60) {
                                if ((i+1)%6 === 0 && (i+1) !== 0) {
                                  artistOther.innerHTML += `
                                <div class="artist-item last">
                                  <div class="img-out"><img data-src="${data[i].pic}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                                  <span>${data[i].name}</span>
                                </div>`
                                } else {
                                  artistOther.innerHTML += `
                                <div class="artist-item">
                                  <div class="img-out"><img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                                  <span>${data[i].name}</span>
                                </div>`
                                }
                              }
                            }
                          })()
                        } else {
                          currentInfoPage = i + 1
                          for (let i = 0; i < data.length; i++) {
                            if ((i+1)%6 === 0 && (i+1) !== 0) {
                              artistOther.innerHTML += `
                              <div class="artist-item last">
                                <div class="img-out"><img data-src="${data[i].pic}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                                <span>${data[i].name}</span>
                              </div>`
                            } else {
                              artistOther.innerHTML += `
                              <div class="artist-item">
                                <div class="img-out"><img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                                <span>${data[i].name}</span>
                              </div>`
                            }
                          }
                        }
                        artistImages = [...document.querySelectorAll('.artist-container img')]
                        for (let i = 0; i < artistImages.length; i++) {
                          if (isVisible(artistImages[i])) {
                            artistImages[i].src = artistImages[i].dataset.src
                            // 防止重复遍历
                            artistImages.splice(i, 1)
                            i--
                          }
                        }
                      })
                    })
                  }
                })()
                var artistImages = [...document.querySelectorAll('.artist-container img')]
                for (let i = 0; i < artistImages.length; i++) {
                  if (isVisible(artistImages[i])) {
                    artistImages[i].src = artistImages[i].dataset.src
                    // 防止重复遍历
                    artistImages.splice(i, 1)
                    i--
                  }
                }
              })
            }
            break
          case 3:
            if (clickjudge[i] === 0) {
              clickjudge[i]++
              axios.get('http://localhost:3000/rcmPlayList').then(data => {
                for (let i = 0; i < data.length/20; i++) {
                  if (i === 0) {
                    songListWrapper.innerHTML += `<li class="num current"><span>${i + 1}</span></li>`
                  } else {
                    songListWrapper.innerHTML += `<li class="num"><span>${i + 1}</span></li>`
                  }
                }
                for (let i = 0; i < data.length && i < 20; i++) {
                  if ((i + 1)%5 === 0) {
                    songListContent.innerHTML += `
                        <div class="item last">
                          <div class="pic-out">
                            <div class="cover">
                              <span class="play-icon">
                                <i class="icon-front"></i>
                              </span>
                            </div>
                            <img data-src="${data[i].img}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                          </div>
                          <p class="name">${data[i].name}</p>
                          <p class="count"><i></i>${data[i].listencnt}</p>
                        </div>
                      `
                  } else {
                    songListContent.innerHTML += `
                        <div class="item">
                          <div class="pic-out">
                            <div class="cover">
                              <span class="play-icon">
                                <i class="icon-front"></i>
                              </span>
                            </div>
                            <img data-src="${data[i].img}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                          </div>
                          <p class="name">${data[i].name}</p>
                          <p class="count"><i></i>${data[i].listencnt}</p>
                        </div>
                      `
                  }
                }
                var songListImages = [...document.querySelectorAll('.song-list-content img')]
                for (let i = 0; i < songListImages.length; i++) {
                  if (isVisible(songListImages[i])) {
                    songListImages[i].src = songListImages[i].dataset.src
                    // 防止重复遍历
                    songListImages.splice(i, 1)
                    i--
                  }
                }
              })
            }
            break
        }
      })
    })(i)
  }
  
  
  /* 绑定滚轮事件异步加载图片 */
  var judgeDevice = true
  var judgeArtist = true
  var judgeHotComment = true
  var artistImages = [...document.querySelectorAll('.artist-container img')]
  window.addEventListener('scroll', function () {
    // console.log(document.documentElement.scrollTop)
    switch (currentPage) {
      case 0:
        if (document.documentElement.scrollTop > 0 && document.documentElement.scrollTop < 1000 && judgeDevice === true) {
          judgeDevice = false
          var itemsDevice = document.querySelector('.song-list-device').querySelectorAll('.item')
          for (var j = 0; j < 5; j++) {
            var img = itemsDevice[j].querySelector('img')
            img.src = './source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png'
          }
          axios.get('http://localhost:3000/playList').then(data => {
            (function () {
              for (var i = 0; i < data.length && i < itemsDevice.length; i++) {
                var name = itemsDevice[i].querySelector('.name')
                var count = itemsDevice[i].querySelector('.count')
                var img = itemsDevice[i].querySelector('img')
                name.innerHTML = data[i].name
                count.innerHTML = filterNum(data[i].listencnt)
                img.src = (data[i].img).toString()
              }
            })()
          })
          break;
        }
        if (document.documentElement.scrollTop > 700 && document.documentElement.scrollTop < 1000 && judgeArtist === true) {
          judgeArtist = false
          var itemsArtict = document.querySelector('.song-list-artist').querySelectorAll('.artist-item')
          for (var k = 0; k < 6; k++) {
            var img2 = itemsArtict[k].querySelector('img')
            img2.src = './source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png'
          }
          axios.get('http://localhost:3000/artistList').then(data => {
            (function () {
              for (var i = 0; i < data.length && i < itemsArtict.length; i++) {
                var text = itemsArtict[i].querySelector('.name')
                var num = itemsArtict[i].querySelector('.num')
                var img = itemsArtict[i].querySelector('img')
                text.innerHTML = data[i].name
                num.innerHTML = filterNum(data[i].musicNum, 1)
                img.src = (data[i].pic).toString()
              }
            })()
          })
        }
        break
      case 1:
        if (document.documentElement.scrollTop > 1000 && document.documentElement.scrollTop < 1400 && judgeHotComment === true) {
          judgeHotComment = false
          var commentItems = document.querySelector('.all-comment').querySelectorAll('.comment-item')
          axios.get('http://localhost:3000/hotComment').then(data => {
            for (var i = 0; i < data.length && i < 5; i++) {
              var nickname = commentItems[i].querySelector('span')
              var text = commentItems[i].querySelector('.text')
              var time = commentItems[i].querySelector('.time')
              var img = commentItems[i].querySelector('img')
              nickname.innerHTML = data[i].u_name
              text.innerHTML = data[i].msg
              time.innerHTML = data[i].time
              img.src = (data[i].u_pic).toString()
            }
          })
          var commonCommentItems = document.querySelectorAll('.all-comment')[1].querySelectorAll('.comment-item')
          axios.get('http://localhost:3000/commonComment').then(data => {
            for (var i = 0; i < data.length && i < 5; i++) {
              var nickname = commonCommentItems[i].querySelector('span')
              var text = commonCommentItems[i].querySelector('.text')
              var time = commonCommentItems[i].querySelector('.time')
              var img = commonCommentItems[i].querySelector('img')
              nickname.innerHTML = data[i].u_name
              time.innerHTML = filterNum(data[i].time, 3)
              if ((data[i].u_pic).toString()) {
                img.src = (data[i].u_pic).toString()
              }
              if (data[i].reply) {
                var reply = commonCommentItems[i].querySelector('.reply')
                var textInner = text.querySelector('a')
                textInner.innerHTML = '@' + data[i].reply.u_name
                text.innerHTML += ': ' + data[i].msg
                reply.innerHTML = data[i].reply.msg
              } else {
                text.innerHTML = data[i].msg
              }
            }
          })
        }
        break
      case 2:
        var artistImages = [...document.querySelectorAll('.artist-container img')]
        for (let i = 0; i < artistImages.length; i++) {
          if (isVisible(artistImages[i])) {
            artistImages[i].src = artistImages[i].dataset.src
            // 防止重复遍历
            artistImages.splice(i, 1)
            i--
          }
        }
        break
      case 3:
        var songListImages = [...document.querySelectorAll('.song-list-content img')]
        for (let i = 0; i < songListImages.length; i++) {
          if (isVisible(songListImages[i])) {
            songListImages[i].src = songListImages[i].dataset.src
            // 防止重复遍历
            songListImages.splice(i, 1)
            i--
          }
        }
    }
  })
  
  
  /* 顶部滚动轮播图 */
  var box = document.getElementsByClassName('swiper-container')[0]
  var BtnL = document.getElementsByClassName('BtnL')[0]
  var BtnR = document.getElementsByClassName('BtnR')[0]
  var swiperWrapper = document.getElementsByClassName('swiper-wrapper')[0]
  var swiperSlide = document.getElementsByClassName('swiper-slide')
  var swiperBullets = document.getElementsByClassName('swiper-bullets')[0]
  var blur = document.getElementsByTagName('image')
  var counter = 1 // 图 8片标识
  var circle = 0 // 按钮标识
  var flag = true // 一次轮播操作完成后才允许下次操作
  var timer // 定时器
  var mousedownFlag = false // 避免拖动时重复触发移出操作增加的定时器
  // 定时器
  var play = function() {
    timer = setInterval(function() {
      BtnR.click()
    }, 5000)
  }
  play()
  // 鼠标悬停时停止轮播, 移出时恢复轮播
  box.onmouseover = function() {
    clearInterval(timer)
  }
  box.onmouseleave = function() {
    if (mousedownFlag === false) {
      play()
    }
  };
  swiperWrapper.onmousedown = function () {
    clearInterval(timer)
  };
  // 动态生成按钮 按钮点击逻辑
  /* 7张图对应5个按钮, 需要分别设置状态, 判断两个边界时直接改值 */
  (function () {
    for (var i = 0; i < swiperSlide.length - 2; i++) {
      var span = document.createElement('span')
      span.className = 'current'
      span.setAttribute('index', i)
      swiperBullets.appendChild(span)
      span.addEventListener('click', function () {
        for (var i = 0; i < swiperBullets.children.length; i++) {
          swiperBullets.children[i].className = 'current'
        }
        this.className = 'current white'
        var index = parseInt(this.getAttribute('index')) + 1
        swiperWrapper.style.left = -1400 * index + 'px'
        circle = index - 1
        counter = index
      })
    }
  })()
  swiperBullets.children[0].className = 'current white'
  blur[0].style.display = 'block'
  blur[0].style.filter = 'url(#blur)'
  function circleChange() {
    (function () {
      for (var i = 0; i < swiperBullets.children.length; i++) {
        swiperBullets.children[i].className = 'current'
        blur[i].style.display = 'none'
        blur[i].style.filter = ""
      }
      swiperBullets.children[circle].className = 'current white'
      blur[circle].style.display = 'block'
      blur[circle].style.filter = 'url(#blur)'
    })()
  }
  BtnL.addEventListener('click', function () {
    if (flag) {
      flag = false
      if (counter > 0) {
        swiperWrapper.style.left = parseInt(swiperWrapper.style.left) + 1400 + 'px'
        counter--
        flag = true
        circle--
        if (circle < 0) {
          circle = swiperBullets.children.length - 1
        }
        circleChange()
      } else {
        swiperWrapper.style.transition = 'none'
        swiperWrapper.style.left = '-8400px'
        setTimeout(function() {
          swiperWrapper.style.transition = 'left 0.5s ease-in-out'
          swiperWrapper.style.left = '-7000px'
        }, 300);
        counter = 5
        circle = 4
        flag = true
        circleChange()
      }
    }
  })
  BtnR.addEventListener('click', function () {
    if (flag) {
      flag = false
      if (counter < 7) {
        swiperWrapper.style.left = parseInt(swiperWrapper.style.left) - 1400 + 'px'
        counter++
        flag = true
        circle++
        if (circle > swiperBullets.children.length - 1) {
          circle = 0
        }
        circleChange()
      } else {
        swiperWrapper.style.transition = 'none'
        swiperWrapper.style.left = '-1400px'
        setTimeout(function() {
          swiperWrapper.style.transition = 'left 0.5s ease-in-out'
          swiperWrapper.style.left = '-2800px'
        }, 300)
        circle = 1
        counter = 2
        flag = true
        circleChange()
      }
    }
  })
  // 拖动超过一半触发点击事件
  var currentLeft
  var downMouseLeft
  var currentMouseLeft
  var swiperJudge = false
  var firstTime = ''
  var lastTime = ''
  swiperWrapper.addEventListener('mousedown', function (e) {
    mousedownFlag = true
    clearInterval(timer)
    swiperJudge = true
    swiperWrapper.style.transition = 'none'
    currentLeft = parseInt(swiperWrapper.style.left)
    downMouseLeft = e.clientX
    firstTime = new Date().getTime()
    window.addEventListener('mousemove', move)
  })
  /* move事件绑定到window上,避免滑动时超出容器导致后续操作不生效 */
  function move (e) {
    if(counter === 0 && (e.clientX - downMouseLeft) > 0) {}
    else if (counter === 7 && (e.clientX - downMouseLeft) < 0) {}
    else { swiperWrapper.style.left = currentLeft - downMouseLeft + e.clientX + 'px' }
  }
  window.addEventListener('mouseup', function (e) {
    lastTime = new Date().getTime()
    mousedownFlag = false
    if ((lastTime - this.firstTime) < 100) {
      swiperJudge = false
      e.target.children[0].click()
    }
    if (swiperJudge === true) {
      var upMouseLeft = e.clientX
      window.removeEventListener('mousemove', move)
      swiperWrapper.style.transition = 'left 0.5s ease-in-out'
      if (upMouseLeft - downMouseLeft > 800) {
        swiperWrapper.style.left = currentLeft + 'px'
        BtnL.click()
      } else if (upMouseLeft - downMouseLeft < -800){
        swiperWrapper.style.left = currentLeft + 'px'
        BtnR.click()
      } else {
        swiperWrapper.style.left = currentLeft + 'px'
      }
      play()
    }
    swiperJudge = false
  })
  
  
  /* 视窗浮动下载框 */
  var model = document.getElementsByClassName('model')[0]
  var close = document.getElementsByClassName('close')[0]
  var downloadAndroid = document.getElementsByClassName('downloadAndroid')[0]
  var downloadIphone = document.getElementsByClassName('downloadIphone')[0]
  var androidTitle = document.getElementsByClassName('androidTitle')[0]
  var iphoneTitle = document.getElementsByClassName('iphoneTitle')[0]
  close.addEventListener('click', function() {
    model.style.display = 'none'
  })
  downloadAndroid.addEventListener('click', function() {
    model.style.display = 'block'
    androidTitle.style.display = 'inline-block'
    iphoneTitle.style.display = 'none'
  })
  downloadIphone.addEventListener('click', function() {
    model.style.display = 'block'
    iphoneTitle.style.display = 'inline-block'
    androidTitle.style.display = 'none'
  })
  
  
  /* 推荐歌单栏标签动态选中效果 */
  var playListTitle = document.querySelectorAll('.sub-nav')[1].querySelectorAll('a');
  (function () {
    for (var i = 0; i < playListTitle.length; i++) {
      (function (i) {
        playListTitle[i].addEventListener('click', function () {
          var itemsDevice = document.querySelector('.song-list-device').querySelectorAll('.item')
          for (var j = 0;j < 5; j++) {
            var img = itemsDevice[j].querySelector('img')
            img.src = './source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png'
          }
          for (var t = 0; t < playListTitle.length; t++) {
            playListTitle[t].classList = ''
          }
          playListTitle[i].classList.add('current')
          var website = i ? 'http://localhost:3000/playList'  + i : 'http://localhost:3000/playList'
          axios.get(website).then(data => {
            (function () {
              for (var i = 0; i < data.length && i < itemsDevice.length; i++) {
                var name = itemsDevice[i].querySelector('.name')
                var count = itemsDevice[i].querySelector('.count')
                var img = itemsDevice[i].querySelector('img')
                name.innerHTML = data[i].name
                count.innerHTML = filterNum(data[i].listencnt)
                img.src = (data[i].img).toString()
              }
            })()
          })
        })
      })(i)
    }
  })()
  
  /* 推荐歌手栏标签动态选中效果 */
  var singerListTitle = document.querySelectorAll('.sub-nav')[2].querySelectorAll('a');
  (function () {
    for (var i = 0; i < singerListTitle.length; i++) {
      (function (i) {
        singerListTitle[i].addEventListener('click', function () {
          var itemsArtict = document.querySelector('.song-list-artist').querySelectorAll('.artist-item')
          for (var j = 0;j < 6; j++) {
            var img = itemsArtict[j].querySelector('img')
            img.src = './source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png'
          }
          for (var t = 0; t < singerListTitle.length; t++) {
            singerListTitle[t].classList = ''
          }
          singerListTitle[i].classList.add('current')
          var website = i ? 'http://localhost:3000/artistList' + i : 'http://localhost:3000/artistList'
          axios.get(website).then(data => {
            (function () {
              for (var i = 0; i < data.length && i < itemsArtict.length; i++) {
                var text = itemsArtict[i].querySelector('.name')
                var num = itemsArtict[i].querySelector('.num')
                var img = itemsArtict[i].querySelector('img')
                text.innerHTML = data[i].name
                num.innerHTML = filterNum(data[i].musicNum, 1)
                img.src = (data[i].pic).toString()
              }
            })()
          })
        })
      })(i)
    }
  })()
  
  
  /* 排行榜左侧标题标签动态选中效果 */
  var conLListTitle = document.querySelectorAll('.sub-nav')[3].querySelectorAll('a');
  (function () {
    for (var i = 0; i < conLListTitle.length; i++) {
      (function (i) {
        conLListTitle[i].addEventListener('click', function () {
          for (var t = 0; t < conLListTitle.length; t++) {
            conLListTitle[t].classList = ''
          }
          conLListTitle[i].classList.add('current')
        })
      })(i)
    }
  })()
  /* 排行榜左侧列表标签动态选中效果 */
  var conLItemListTitle = document.querySelector('.con-list').querySelectorAll('li');
  (function () {
    for (var i = 0; i < conLItemListTitle.length; i++) {
      (function (i) {
        conLItemListTitle[i].addEventListener('click', function () {
          for (var t = 0; t < conLItemListTitle.length; t++) {
            conLItemListTitle[t].classList = ''
          }
          conLItemListTitle[i].classList.add('active')
        })
      })(i)
    }
  })()
  
  
  /* 分页按钮显示逻辑 */
  var centerPageList = [0, 1, 2]
  function changePageBtnList(type = 0, songPageWrap, songPageWrapper, songPageList) {
    var x
    // 如果分页数大于当前数组选中值,数组右移一位
    if (centerPageList[1] < songPageList.length && type === 1) {
      for (x = 0; x < 3; x++) {
        ++centerPageList[x]
      }
    }
    // 如果左侧没有到1,数组左移一位
    if (centerPageList[1] > 1 && type === 2 ) {
      for (x = 0; x < 3; x++) {
        centerPageList[x]--
      }
    }
    // 点选数组, 数组中间为currentPage
    if (type === 3) {
      centerPageList = [currentSongPage-1, currentSongPage, currentSongPage+1]
    }
    // 每次点击清空列表 列表第一项始终为
    if (songPageList.length === 1) {
      songPageWrapper.innerHTML = `<li class="num current"><span>1</span></li>`
    } else if (centerPageList[1] === 1) {
      songPageWrapper.innerHTML = `<li class="num current"><span>1</span></li>`
    } else {
      songPageWrapper.innerHTML = `<li class="num"><span>1</span></li>`
    }
    
    // 选中数字小于等于3
    if (centerPageList[1] <= 3) {
      // 分页标签增加到选中序号
      for (let i = 2; i <= centerPageList[1]; i++) {
        if (i === centerPageList[1]) {
          songPageWrapper.innerHTML += `<li class="num current"><span>${i}</span></li>`
        } else {
          songPageWrapper.innerHTML += `<li class="num"><span>${i}</span></li>`
        }
      }
      // 如果分页长度大于等于中间表第三项则再补一项
      if (centerPageList[2] <= songPageList.length) {
        songPageWrapper.innerHTML += `<li class="num"><span>${centerPageList[2]}</span></li>`
      }
    }
    
    // 选中页数大于等于4 加···
    if (centerPageList[1] >= 4) {
      songPageWrapper.innerHTML += `<li class="notCursor"><span>···</span></li>`
      for (let i = 0; i < centerPageList.length - 1; i++) {
        if (i === 1) {
          songPageWrapper.innerHTML += `<li class="num current"><span>${centerPageList[i]}</span></li>`
        } else {
          songPageWrapper.innerHTML += `<li class="num"><span>${centerPageList[i]}</span></li>`
        }
      }
      // 如果分页长度大于等于中间表第三项则再补一项
      if (centerPageList[2] <= songPageList.length) {
        songPageWrapper.innerHTML += `<li class="num"><span>${centerPageList[2]}</span></li>`
      }
    }
    
    // 右侧逻辑 1. 分页数量等于中间表第三项 => 不进行任何操作  2. 分页数量等于中间表第三项加1 => 补上最后一个分页标签  2. 分页数量大于中间表第三项加1 => 补上...和最后一个分页标签
    if (songPageList.length === centerPageList[2] + 1) {
      songPageWrapper.innerHTML += `<li class="num"><span>${songPageList.length}</span></li>`
    }
    if (songPageList.length > centerPageList[2] + 1) {
      songPageWrapper.innerHTML += `<li class="notCursor"><span>···</span></li>`
      songPageWrapper.innerHTML += `<li class="num"><span>${songPageList.length}</span></li>`
    }
    var nums = songPageWrap.querySelectorAll('.num');
    for (let i = 0; i < nums.length; i++) {
      nums[i].addEventListener('click', (e) => {
        currentSongPage = e.target.children[0] ? parseInt(e.target.children[0].innerHTML) : parseInt(e.target.innerHTML)
        loadingMask.style.display = 'block'
        changePageBtnList(3, songPageWrap, songPageWrapper, songPageList)
        var website = 'http://localhost:3000/musicList?_page=' + currentSongPage + '&_limit=20';
        axios.get(website).then(data => {
          if (currentSongPage >= songPageList.length - 1 || currentSongPage === 1) {
            rankList.innerHTML = '';
            for (let i = 0; i < data.length; i++) {
              var itemSong = `
                <li class="song-item">
                  <div class="song-rank">
                    <div class="rank-num"></div>
                    <div class="gap" style="background-color: #FFFFFF"></div>
                    <img src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                  </div>
                  <div class="song-name">
                    <a href="">${data[i].name}</a>
                  </div>
                  <div class="song-artist">
                    <span>${data[i].artist}</span>
                  </div>
                  <div class="song-album">
                    <span>${data[i].album}</span>
                  </div>
                  <div class="song-time">
                    <span>${filterNum(data[i].duration, 2)}</span>
                  </div>
                  <div class="btns">
                    <i></i>
                    <div class="gap"></div>
                    <i></i>
                    <div class="gap"></div>
                    <i></i>
                    <div class="gap"></div>
                    <i></i>
                  </div>
                </li>`
              rankList.innerHTML += itemSong
            }
            /* 排行榜右侧歌曲列表斑马纹以及序号 */
            var songItems = document.querySelectorAll('.song-item');
            for (let i = 0; i < songItems.length; i++) {
              if (i%2 !== 0) {
                songItems[i].style.backgroundColor = '#FAFAFA'
                songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#FAFAFA'
              }
              songItems[i].addEventListener('mouseenter', function() {
                songItems[i].style.backgroundColor = '#F5F5F5'
                songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#F5F5F5'
              })
              songItems[i].addEventListener('mouseleave', function() {
                if (i%2 !== 0) {
                  songItems[i].style.backgroundColor = '#FAFAFA'
                  songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#FAFAFA'
                } else {
                  songItems[i].style.backgroundColor = '#FFF'
                  songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#FFF'
                }
              })
            }
            for (var k = 0; k < songItems.length; k++) {
              var img = songItems[k].querySelector('img')
              img.src = './source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png'
            }
          }
          return data
        }).then(data => {
          var itemsSong = document.querySelector('.rank-list').querySelectorAll('.song-item')
          for (let i = 0; i < data.length; i++) {
            var songName = itemsSong[i].querySelector('.song-name')
            songName.innerHTML = `<a href=""></a>`
            var songNameA = itemsSong[i].querySelector('.song-name').querySelector('a')
            var songArtist = itemsSong[i].querySelector('.song-artist').querySelector('span')
            var songAlbum = itemsSong[i].querySelector('.song-album').querySelector('span')
            var songTime = itemsSong[i].querySelector('.song-time').querySelector('span')
            var songRank = itemsSong[i].querySelector('.song-rank')
            songNameA.innerHTML = data[i].name
            songArtist.innerHTML = data[i].artist
            songAlbum.innerHTML = data[i].album
            songTime.innerHTML = filterNum(data[i].duration, 2)
            if (i < 3 && currentSongPage === 1) {
              switch (i) {
                case 0:
                  songRank.innerHTML = `
                    <div class="rank-num" style="background: url(./source/img/icon_first.df06fb1.png) center 4px no-repeat; background-size: 168%;"></div>
                    <div class="gap"></div>
                    <img src="${data[i].pic}" alt>
                  `
                  break
                case 1:
                  songRank.innerHTML = `
                    <div class="rank-num" style="background: url(./source/img/icon_secondary.d99e73e.png) center 4px no-repeat; background-size: 168%;"></div>
                    <div class="gap"></div>
                    <img src="${data[i].pic}" alt>
                  `
                  break
                case 2:
                  songRank.innerHTML = `
                    <div class="rank-num" style="background: url(./source/img/icon_third.8abbb65.png) center 4px no-repeat; background-size: 168%;"></div>
                    <div class="gap"></div>
                    <img src="${data[i].pic}" alt>
                  `
                  break
              }
            } else {
              songRank.innerHTML = `
                <div class="rank-num">${(currentSongPage - 1) * 20 + i + 1}</div>
                <div class="gap"></div>
                <img src="${data[i].pic}" alt>
              `
            }
            if (data[i].hasLossless === true) {
              songName.innerHTML += `<i class="wusun"></i>`
            }
            if (data[i].hasmv) {
              songName.innerHTML += `<i class="mv"></i>`
            }
          }
          loadingMask.style.display = 'none'
        })
      })
    }
    return nums
  }
  
  /* 飙升榜分页 */
  axios.get('http://localhost:3000/musicList').then(data => {
    var website
    var songPageWrap = document.querySelector('.con-r').querySelector('.page-wrap')
    var songPageList = [];
    // 中间表从0开始, 因为始终要保证中间的数字高亮
    var centerPageList = [0, 1, 2];
    songPageWrap.innerHTML = `
      <i class="buttonL"><</i>
      <ul>
      </ul>
      <i class="buttonR">></i>
    `
    var songPageWrapper = songPageWrap.querySelector('ul');
    /* 分页按钮初始状态 */
    var buttonL = songPageWrap.querySelector('.buttonL')
    var buttonR = songPageWrap.querySelector('.buttonR')
    for (var i = 0; i < data.length/20; i++) {
      songPageList.push(i + 1)
    }
    // 初始状态
    // 表长为1, 只设置一页
    if (songPageList.length === 1) {
      songPageWrapper.innerHTML += `<li class="num current"><span>${centerPageList[1]}</span></li>`
    }
    // 选中1 加入1,2页
    if (songPageList.length > 1) {
      for (i = 1; i < centerPageList.length; i++) {
        if (i === 1) { songPageWrapper.innerHTML += `<li class="num current"><span>${centerPageList[i]}</span></li>` }
        else { songPageWrapper.innerHTML += `<li class="num"><span>${centerPageList[i]}</span></li>` }
      }
    }
    // 如果总页数大于4 则加入···
    if (songPageList.length - centerPageList[2]  > 1) {
      songPageWrapper.innerHTML += `<li class="notCursor"><span>···</span></li>`
      songPageWrapper.innerHTML += `<li class="num"><span>${songPageList.length}</span></li>`
    } else {
      // 补上3-5的页数
      for (var j = 3; j < songPageList.length + 1; j++) {
        songPageWrapper.innerHTML += `<li class="num"><span>${j}</span></li>`
      }
    }
    // 点击事件
    var nums = songPageWrap.querySelectorAll('.num');
    for (let i = 0; i < nums.length; i++) {
      nums[i].addEventListener('click', (e) => {
        currentSongPage = e.target.children[0] ? parseInt(e.target.children[0].innerHTML) : parseInt(e.target.innerHTML)
        loadingMask.style.display = 'block'
        changePageBtnList(3, songPageWrap, songPageWrapper, songPageList)
        website = 'http://localhost:3000/musicList?_page=' + currentSongPage + '&_limit=20';
        axios.get(website).then(data => {
          if (data.length !== 20) {
            rankList.innerHTML = '';
            for (let i = 0; i < data.length; i++) {
              var itemSong = `
                <li class="song-item">
                  <div class="song-rank">
                    <div class="rank-num"></div>
                    <div class="gap" style="background-color: #FFFFFF"></div>
                    <img src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                  </div>
                  <div class="song-name">
                    <a href="">${data[i].name}</a>
                  </div>
                  <div class="song-artist">
                    <span>${data[i].artist}</span>
                  </div>
                  <div class="song-album">
                    <span>${data[i].album}</span>
                  </div>
                  <div class="song-time">
                    <span>${filterNum(data[i].duration, 2)}</span>
                  </div>
                  <div class="btns">
                    <i></i>
                    <div class="gap"></div>
                    <i></i>
                    <div class="gap"></div>
                    <i></i>
                    <div class="gap"></div>
                    <i></i>
                  </div>
                </li>`
              rankList.innerHTML += itemSong
            }
            /* 排行榜右侧歌曲列表斑马纹以及序号 */
            var songItems = document.querySelectorAll('.song-item');
            for (let i = 0; i < songItems.length; i++) {
              if (i%2 !== 0) {
                songItems[i].style.backgroundColor = '#FAFAFA'
                songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#FAFAFA'
              }
              songItems[i].addEventListener('mouseenter', function() {
                songItems[i].style.backgroundColor = '#F5F5F5'
                songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#F5F5F5'
              })
              songItems[i].addEventListener('mouseleave', function() {
                if (i%2 !== 0) {
                  songItems[i].style.backgroundColor = '#FAFAFA'
                  songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#FAFAFA'
                } else {
                  songItems[i].style.backgroundColor = '#FFF'
                  songItems[i].childNodes[1].childNodes[3].style.backgroundColor = '#FFF'
                }
              })
            }
            for (var k = 0; k < songItems.length; k++) {
              var img = songItems[k].querySelector('img')
              img.src = './source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png'
            }
          }
          return data
        }).then(data => {
          var itemsSong = document.querySelector('.rank-list').querySelectorAll('.song-item')
          for (var i = 0; i < data.length; i++) {
            var songName = itemsSong[i].querySelector('.song-name')
            songName.innerHTML = `<a href=""></a>`
            var songNameA = itemsSong[i].querySelector('.song-name').querySelector('a')
            var songArtist = itemsSong[i].querySelector('.song-artist').querySelector('span')
            var songAlbum = itemsSong[i].querySelector('.song-album').querySelector('span')
            var songTime = itemsSong[i].querySelector('.song-time').querySelector('span')
            var songRank = itemsSong[i].querySelector('.song-rank')
            songNameA.innerHTML = data[i].name
            songArtist.innerHTML = data[i].artist
            songAlbum.innerHTML = data[i].album
            songTime.innerHTML = filterNum(data[i].duration, 2)
            if (i < 3 && currentSongPage === 1) {
              switch (i) {
                case 0:
                  songRank.innerHTML = `
                    <div class="rank-num" style="background: url(./source/img/icon_first.df06fb1.png) center 4px no-repeat; background-size: 168%;"></div>
                    <div class="gap"></div>
                    <img src="${data[i].pic}" alt>
                  `
                  break
                case 1:
                  songRank.innerHTML = `
                    <div class="rank-num" style="background: url(./source/img/icon_secondary.d99e73e.png) center 4px no-repeat; background-size: 168%;"></div>
                    <div class="gap"></div>
                    <img src="${data[i].pic}" alt>
                  `
                  break
                case 2:
                  songRank.innerHTML = `
                    <div class="rank-num" style="background: url(./source/img/icon_third.8abbb65.png) center 4px no-repeat; background-size: 168%;"></div>
                    <div class="gap"></div>
                    <img src="${data[i].pic}" alt>
                  `
                  break
              }
            } else {
              songRank.innerHTML = `
                <div class="rank-num">${(currentSongPage - 1) * 20 + i + 1}</div>
                <div class="gap"></div>
                <img src="${data[i].pic}" alt>
              `
            }
            if (data[i].hasLossless === true) {
              songName.innerHTML += `<i class="wusun"></i>`
            }
            if (data[i].hasmv) {
              songName.innerHTML += `<i class="mv"></i>`
            }
          }
          loadingMask.style.display = 'none'
        })
      })
    }
    function clickL() {
      if (songPageWrapper.querySelector('.current').querySelector('span').innerHTML > 1) {
        changePageBtnList(2, songPageWrap, songPageWrapper, songPageList)
        songPageWrapper.querySelector('.current').click()
        /*buttonL.removeEventListener('click',clickL)
        buttonL.classList.add('forbidden')*/
      }
      /*buttonR.addEventListener('click', clickR)
      buttonR.classList.remove('forbidden')*/
    }
    function clickR() {
      if (songPageWrapper.querySelector('.current').querySelector('span').innerHTML < songPageList.length) {
        changePageBtnList(1, songPageWrap, songPageWrapper, songPageList)
        songPageWrapper.querySelector('.current').click()
        /*buttonR.removeEventListener('click',clickR)
        buttonR.classList.add('forbidden')*/
      }
      /*buttonL.addEventListener('click', clickL)
      buttonL.classList.remove('forbidden')*/
    }
    buttonL.addEventListener('click', clickL)
    buttonR.addEventListener('click', clickR)
  })
  
  /* 普通评论分页 */
  let commentPageWrap = document.querySelectorAll('.con-r>.page-wrap')[1].querySelectorAll('.num');
  let website
  let currentCommitPage = 1
  let allCommentCom = document.querySelectorAll('.all-comment')[1]
  for (let i = 0; i < commentPageWrap.length; i++) {
    website = 'http://localhost:3000/commonComment?_page=' + (i+1) + '&_limit=5';
    (function (website) {
      commentPageWrap[i].addEventListener('click', function () {
        window.scrollTo({
          top: document.getElementById("commonCommit").offsetTop + 80,
          behavior: "instant"
        });
        for (let i = 0; i < commentPageWrap.length; i++) {
          commentPageWrap[i].classList.remove('current')
        }
        currentCommitPage = i + 1
        commentPageWrap[i].classList.add('current')
        axios.get(website).then(data => {
          allCommentCom.innerHTML = `
            <div class="type recent" id="commonCommit">
            <span class="title">最新评论</span>
            <span class="num">3234条</span>
          </div>`
          for (let i = 0; i < data.length && i < 5; i++) {
            var commonComment1 = `
              <div class="comment-item">
                <div class="avatar">
                  <img src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                </div>
                <div class="msg">
                  <div class="nickname">
                    <span></span>
                  </div>
                  <div class="text">回复<a href="javascript:"></a></div>
                  <div class="reply"></div>
                  <div class="time"></div>
                </div>
              </div>`
            var commonComment2 = `
            <div class="comment-item">
              <div class="avatar">
                <img src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
              </div>
              <div class="msg">
                <div class="nickname">
                  <span></span>
                </div>
                <div class="text"></div>
                <div class="time"></div>
              </div>
            </div>`
            if (data[i].reply) {
              allCommentCom.innerHTML += commonComment1
            } else {
              allCommentCom.innerHTML += commonComment2
            }
          }
          return data
        }).then(data => {
          var commonCommentItems = document.querySelectorAll('.all-comment')[1].querySelectorAll('.comment-item')
          for (var i = 0; i < data.length && i < 5; i++) {
            var nickname = commonCommentItems[i].querySelector('span')
            var text = commonCommentItems[i].querySelector('.text')
            var time = commonCommentItems[i].querySelector('.time')
            var img = commonCommentItems[i].querySelector('img')
            nickname.innerHTML = data[i].u_name
            time.innerHTML = filterNum(data[i].time, 3)
            if ((data[i].u_pic).toString()) {
              img.src = (data[i].u_pic).toString()
            }
            if (data[i].reply) {
              var reply = commonCommentItems[i].querySelector('.reply')
              var textInner = text.querySelector('a')
              textInner.innerHTML = '@' + data[i].reply.u_name
              text.innerHTML += ': ' + data[i].msg
              reply.innerHTML = data[i].reply.msg
            } else {
              text.innerHTML = data[i].msg
            }
          }
        })
      })
    })(website)
  }
  let commitBtnL = document.querySelector('.commitBtnL')
  let commitBtnR = document.querySelector('.commitBtnR')
  commitBtnL.addEventListener('click', () => {
    if (currentCommitPage > 1) {
      commentPageWrap[currentCommitPage - 2].click()
    }
  })
  commitBtnR.addEventListener('click', () => {
    if (currentCommitPage < 6) {
      commentPageWrap[currentCommitPage].click()
    }
  })
  
  /* 歌手页筛选 */
  var artistMain = document.querySelector('.artist-main')
  var artistOther = document.querySelector('.artist-other')
  var artistInfoWrapper = document.querySelector('.main-con2 .artist-container ul')
  var artistEn = ''
  var artistType = ''
  var judgeFirst = true
  // 歌手页英文筛选选中样式
  var tagEn = document.querySelectorAll('.tag-en li')
  var websiteArt = 'http://localhost:3000/artistInfo'
  // 拼接查询接口的备份, 便于分页的时候使用
  var secWebsiteArt
  var currentInfoPage = 1
  var artisrtInfoBtnL = document.querySelector('.artistBtnL')
  var artisrtInfoBtnR = document.querySelector('.artistBtnR')
  for (let i = 0; i < tagEn.length; i++) {
    tagEn[i].addEventListener('click', function () {
      for (let t = 0; t < tagEn.length; t++) {
        tagEn[t].classList = ''
      }
      tagEn[i].classList.add('current')
      artistEn = tagEn[i].innerHTML === '热门' ? '' : tagEn[i].innerHTML === '#' ? '35' : tagEn[i].innerHTML
      if (artistEn && !artistType) {
        websiteArt = 'http://localhost:3000/artistInfo?prefix=' + artistEn
        judgeFirst = false
      }
      if (artistType && !artistEn) {
        websiteArt = 'http://localhost:3000/artistInfo?category=' + artistType
        judgeFirst = false
      }
      if (artistType && artistEn) {
        websiteArt = 'http://localhost:3000/artistInfo?category=' + artistType + '&prefix=' + artistEn
        judgeFirst = false
      }
      if (!artistType && !artistEn) {
        websiteArt = 'http://localhost:3000/artistInfo'
        judgeFirst = true
      }
      axios.get(websiteArt).then(data => {
        artistMain.innerHTML = ''
        artistOther.innerHTML = ''
        artistInfoWrapper.innerHTML = ''
        for (let i = 0; i < data.length/60; i++) {
          if (i === 0) {
            artistInfoWrapper.innerHTML += `<li class="num current"><span>${i+1}</span></li>`
          } else {
            artistInfoWrapper.innerHTML += `<li class="num"><span>${i+1}</span></li>`
          }
        }
        for (let i = 0; i < data.length; i++) {
          if (i < 12) {
            if ((i+1)%6 === 0 && (i+1) !== 0) {
              artistMain.innerHTML += `
                <div class="artist-item last">
                  <div class="artist">
                    <div class="pic-out">
                      <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                    </div>
                    <p class="name"><span>${data[i].name}</span></p>
                    <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                  </div>
                </div>`
            } else {
              artistMain.innerHTML += `
                <div class="artist-item">
                  <div class="artist">
                    <div class="pic-out">
                      <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                    </div>
                    <p class="name"><span>${data[i].name}</span></p>
                    <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                  </div>
                </div>`
            }
          }
          if (i >= 12 && i < 60) {
            if ((i+1)%6 === 0 && (i+1) !== 0) {
              artistOther.innerHTML += `
                <div class="artist-item last">
                  <div class="img-out"><img data-src="${data[i].pic}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                  <span>${data[i].name}</span>
                </div>`
            } else {
              artistOther.innerHTML += `
                <div class="artist-item">
                  <div class="img-out"><img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                  <span>${data[i].name}</span>
                </div>`
            }
          }
        }
        var artistImages = [...document.querySelectorAll('.artist-container img')]
        var artistInfoItems = artistInfoWrapper.querySelectorAll('li')
        for (let i = 0; i < artistInfoItems.length; i++) {
          artistInfoItems[i].addEventListener('click', e => {
            artistMain.innerHTML = ''
            artistOther.innerHTML = ''
            for (let t = 0; t < artistInfoItems.length; t++) {
              artistInfoItems[t].classList = ''
            }
            artistInfoItems[i].classList.add('current')
            if (judgeFirst === true) {
              secWebsiteArt = websiteArt + `?_page=${e.target.children.length ? +(e.target.children[0].innerHTML) : + (e.target.innerHTML)}&_limit=60`
            } else {
              secWebsiteArt = websiteArt + `&_page=${e.target.children.length ? +(e.target.children[0].innerHTML) : + (e.target.innerHTML)}&_limit=60`
            }
            axios.get(secWebsiteArt).then(data => {
              if (artistInfoItems[i].children[0].innerHTML === '1') {
                currentInfoPage = 1
                for (let i = 0; i < data.length; i++) {
                  if (i < 12) {
                    if ((i+1)%6 === 0 && (i+1) !== 0) {
                      artistMain.innerHTML += `
                        <div class="artist-item last">
                          <div class="artist">
                            <div class="pic-out">
                              <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                            </div>
                            <p class="name"><span>${data[i].name}</span></p>
                            <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                          </div>
                        </div>`
                    } else {
                      artistMain.innerHTML += `
                        <div class="artist-item">
                          <div class="artist">
                            <div class="pic-out">
                              <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                            </div>
                            <p class="name"><span>${data[i].name}</span></p>
                            <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                          </div>
                        </div>`
                    }
                  }
                  if (i >= 12 && i < 60) {
                    if ((i+1)%6 === 0 && (i+1) !== 0) {
                      artistOther.innerHTML += `
                        <div class="artist-item last">
                          <div class="img-out"><img data-src="${data[i].pic}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                          <span>${data[i].name}</span>
                        </div>`
                    } else {
                      artistOther.innerHTML += `
                        <div class="artist-item">
                          <div class="img-out"><img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                          <span>${data[i].name}</span>
                        </div>`
                    }
                  }
                }
              } else {
                currentInfoPage = i + 1
                for (let i = 0; i < data.length; i++) {
                  if ((i+1)%6 === 0 && (i+1) !== 0) {
                    artistOther.innerHTML += `
                    <div class="artist-item last">
                      <div class="img-out"><img data-src="${data[i].pic}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                      <span>${data[i].name}</span>
                    </div>`
                  } else {
                    artistOther.innerHTML += `
                    <div class="artist-item">
                      <div class="img-out"><img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                      <span>${data[i].name}</span>
                    </div>`
                  }
                }
              }
              artistImages = [...document.querySelectorAll('.artist-container img')]
              for (let i = 0; i < artistImages.length; i++) {
                if (isVisible(artistImages[i])) {
                  artistImages[i].src = artistImages[i].dataset.src
                  // 防止重复遍历
                  artistImages.splice(i, 1)
                  i--
                }
              }
            })
          })
        }
        for (let i = 0; i < artistImages.length; i++) {
          if (isVisible(artistImages[i])) {
            artistImages[i].src = artistImages[i].dataset.src
            // 防止重复遍历
            artistImages.splice(i, 1)
            i--
          }
        }
      })
    })
  }
  
  // 歌手页类型筛选
  var tagKind = document.querySelectorAll('.tag-kind li')
  for (let i = 0; i < tagKind.length; i++) {
    tagKind[i].addEventListener('click', function () {
      for (let t = 0; t < tagKind.length; t++) {
        tagKind[t].classList = ''
      }
      tagKind[i].classList.add('current')
      artistType = tagKind[i].innerHTML === '全部' ? '' : i
      if (artistEn && !artistType) {
        websiteArt = 'http://localhost:3000/artistInfo?prefix=' + artistEn
        judgeFirst = false
      }
      if (artistType && !artistEn) {
        websiteArt = 'http://localhost:3000/artistInfo?category=' + artistType
        judgeFirst = false
      }
      if (artistType && artistEn) {
        websiteArt = 'http://localhost:3000/artistInfo?category=' + artistType + '&prefix=' + artistEn
        judgeFirst = false
      }
      if (!artistType && !artistEn) {
        websiteArt = 'http://localhost:3000/artistInfo'
        judgeFirst = true
      }
      axios.get(websiteArt).then(data => {
        artistMain.innerHTML = ''
        artistOther.innerHTML = ''
        artistInfoWrapper.innerHTML = ''
        for (let i = 0; i < data.length/60; i++) {
          if (i === 0) {
            artistInfoWrapper.innerHTML += `<li class="num current"><span>${i+1}</span></li>`
          } else {
            artistInfoWrapper.innerHTML += `<li class="num"><span>${i+1}</span></li>`
          }
        }
        for (let i = 0; i < data.length; i++) {
          if (i < 12) {
            if ((i+1)%6 === 0 && (i+1) !== 0) {
              artistMain.innerHTML += `
                <div class="artist-item last">
                  <div class="artist">
                    <div class="pic-out">
                      <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                    </div>
                    <p class="name"><span>${data[i].name}</span></p>
                    <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                  </div>
                </div>`
            } else {
              artistMain.innerHTML += `
                <div class="artist-item">
                  <div class="artist">
                    <div class="pic-out">
                      <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                    </div>
                    <p class="name"><span>${data[i].name}</span></p>
                    <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                  </div>
                </div>`
            }
          }
          if (i >= 12 && i < 60) {
            if ((i+1)%6 === 0 && (i+1) !== 0) {
              artistOther.innerHTML += `
                <div class="artist-item last">
                  <div class="img-out"><img data-src="${data[i].pic}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                  <span>${data[i].name}</span>
                </div>`
            } else {
              artistOther.innerHTML += `
                <div class="artist-item">
                  <div class="img-out"><img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                  <span>${data[i].name}</span>
                </div>`
            }
          }
        }
        var artistImages = [...document.querySelectorAll('.artist-container img')]
        var artistInfoItems = artistInfoWrapper.querySelectorAll('li')
        for (let i = 0; i < artistInfoItems.length; i++) {
          artistInfoItems[i].addEventListener('click', e => {
            artistMain.innerHTML = ''
            artistOther.innerHTML = ''
            for (let t = 0; t < artistInfoItems.length; t++) {
              artistInfoItems[t].classList = ''
            }
            artistInfoItems[i].classList.add('current')
            if (judgeFirst === true) {
              secWebsiteArt = websiteArt + `?_page=${e.target.children.length ? +(e.target.children[0].innerHTML) : + (e.target.innerHTML)}&_limit=60`
            } else {
              secWebsiteArt = websiteArt + `&_page=${e.target.children.length ? +(e.target.children[0].innerHTML) : + (e.target.innerHTML)}&_limit=60`
            }
            axios.get(secWebsiteArt).then(data => {
              if (artistInfoItems[i].children[0].innerHTML === '1') {
                currentInfoPage = 1
                for (let i = 0; i < data.length; i++) {
                  if (i < 12) {
                    if ((i+1)%6 === 0 && (i+1) !== 0) {
                      artistMain.innerHTML += `
                        <div class="artist-item last">
                          <div class="artist">
                            <div class="pic-out">
                              <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                            </div>
                            <p class="name"><span>${data[i].name}</span></p>
                            <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                          </div>
                        </div>`
                    } else {
                      artistMain.innerHTML += `
                        <div class="artist-item">
                          <div class="artist">
                            <div class="pic-out">
                              <img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                            </div>
                            <p class="name"><span>${data[i].name}</span></p>
                            <p class="num">${filterNum(data[i].musicNum, 1)}</p>
                          </div>
                        </div>`
                    }
                  }
                  if (i >= 12 && i < 60) {
                    if ((i+1)%6 === 0 && (i+1) !== 0) {
                      artistOther.innerHTML += `
                        <div class="artist-item last">
                          <div class="img-out"><img data-src="${data[i].pic}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                          <span>${data[i].name}</span>
                        </div>`
                    } else {
                      artistOther.innerHTML += `
                        <div class="artist-item">
                          <div class="img-out"><img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                          <span>${data[i].name}</span>
                        </div>`
                    }
                  }
                }
              } else {
                currentInfoPage = i + 1
                for (let i = 0; i < data.length; i++) {
                  if ((i+1)%6 === 0 && (i+1) !== 0) {
                    artistOther.innerHTML += `
                    <div class="artist-item last">
                      <div class="img-out"><img data-src="${data[i].pic}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                      <span>${data[i].name}</span>
                    </div>`
                  } else {
                    artistOther.innerHTML += `
                    <div class="artist-item">
                      <div class="img-out"><img data-src="${data[i].pic}"  src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt></div>
                      <span>${data[i].name}</span>
                    </div>`
                  }
                }
              }
              artistImages = [...document.querySelectorAll('.artist-container img')]
              for (let i = 0; i < artistImages.length; i++) {
                if (isVisible(artistImages[i])) {
                  artistImages[i].src = artistImages[i].dataset.src
                  // 防止重复遍历
                  artistImages.splice(i, 1)
                  i--
                }
              }
            })
          })
        }
        for (let i = 0; i < artistImages.length; i++) {
          if (isVisible(artistImages[i])) {
            artistImages[i].src = artistImages[i].dataset.src
            // 防止重复遍历
            artistImages.splice(i, 1)
            i--
          }
        }
      })
    })
  }
  
  artisrtInfoBtnL.addEventListener('click', function() {
    if (currentInfoPage > 1) {
      var artistInfoItems = artistInfoWrapper.querySelectorAll('li')
      artistInfoItems[currentInfoPage - 2].click()
    }
  })
  artisrtInfoBtnR.addEventListener('click', function() {
    if (currentInfoPage < artistInfoWrapper.children.length) {
      var artistInfoItems = artistInfoWrapper.querySelectorAll('li')
      artistInfoItems[currentInfoPage].click()
    }
  })
  
  
  /* 歌单页筛选 */
  var songListContent = document.querySelector('.song-list-content')
  var songListWrapper = document.querySelector('.main-con3 .page-wrap ul')
  var songListItems
  var songListCurrentType = 0
  // 歌单页类型筛选
  var songListType = document.querySelectorAll('.main-con3 .sub-nav a')
  let judge
  const promise = new Promise((resolve, reject) => {
    judge = function(val) {
      val ? resolve(val) : reject()
    }
  })
  for (let i = 0; i < songListType.length; i++) {
    songListType[i].addEventListener('click', function() {
      songListCurrentType = i
      songListContent.innerHTML = ''
      songListWrapper.innerHTML = ''
      for (let i = 0; i < songListType.length; i++) {
        songListType[i].classList.remove("current")
      }
      songListType[i].classList.add("current")
      if (i === 0) {
        axios.get('http://localhost:3000/rcmPlayList').then(data => {
          for (let i = 0; i < data.length/20; i++) {
            if (i === 0) {
              songListWrapper.innerHTML += `<li class="num current"><span>${i + 1}</span></li>`
            } else {
              songListWrapper.innerHTML += `<li class="num"><span>${i + 1}</span></li>`
            }
          }
          songListItems = songListWrapper.querySelectorAll('.num')
          judge = true
          for (let i = 0; i < data.length && i < 20; i++) {
            if ((i + 1)%5 === 0) {
              songListContent.innerHTML += `
                <div class="item last">
                  <div class="pic-out">
                    <div class="cover">
                      <span class="play-icon">
                        <i class="icon-front"></i>
                      </span>
                    </div>
                    <img data-src="${data[i].img}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                  </div>
                  <p class="name">${data[i].name}</p>
                  <p class="count"><i></i>${data[i].listencnt}</p>
                </div>`
            } else {
              songListContent.innerHTML += `
                <div class="item">
                  <div class="pic-out">
                    <div class="cover">
                      <span class="play-icon">
                        <i class="icon-front"></i>
                      </span>
                    </div>
                    <img data-src="${data[i].img}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                  </div>
                  <p class="name">${data[i].name}</p>
                  <p class="count"><i></i>${data[i].listencnt}</p>
                </div>`
            }
          }
          var songListImages = [...document.querySelectorAll('.song-list-content img')]
          for (let i = 0; i < songListImages.length; i++) {
            if (isVisible(songListImages[i])) {
              songListImages[i].src = songListImages[i].dataset.src
              // 防止重复遍历
              songListImages.splice(i, 1)
              i--
            }
          }
        })
      } else {
        axios.get('http://localhost:3000/rcmPlayListHot').then(data => {
          for (let i = 0; i < data.length/20; i++) {
            if (i === 0) {
              songListWrapper.innerHTML += `<li class="num current"><span>${i + 1}</span></li>`
            } else {
              songListWrapper.innerHTML += `<li class="num"><span>${i + 1}</span></li>`
            }
          }
          songListItems = songListWrapper.querySelectorAll('.num')
          judge = true
          for (let i = 0; i < data.length && i < 20; i++) {
            if ((i + 1)%5 === 0) {
              songListContent.innerHTML += `
                <div class="item last">
                  <div class="pic-out">
                    <div class="cover">
                      <span class="play-icon">
                        <i class="icon-front"></i>
                      </span>
                    </div>
                    <img data-src="${data[i].img}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                  </div>
                  <p class="name">${data[i].name}</p>
                  <p class="count"><i></i>${data[i].listencnt}</p>
                </div>`
            } else {
              songListContent.innerHTML += `
                <div class="item">
                  <div class="pic-out">
                    <div class="cover">
                      <span class="play-icon">
                        <i class="icon-front"></i>
                      </span>
                    </div>
                    <img data-src="${data[i].img}" src="./source/img/4f768883f75b17a426c95b93692d98bec7d3ee9240f77f5ea68fc63870fdb050.png" alt>
                  </div>
                  <p class="name">${data[i].name}</p>
                  <p class="count"><i></i>${data[i].listencnt}</p>
                </div>`
            }
          }
          var songListImages = [...document.querySelectorAll('.song-list-content img')]
          for (let i = 0; i < songListImages.length; i++) {
            if (isVisible(songListImages[i])) {
              songListImages[i].src = songListImages[i].dataset.src
              // 防止重复遍历
              songListImages.splice(i, 1)
              i--
            }
          }
        })
      }
    })
  }
  promise.then (async () => {
    console.log(1)
    for (let i = 0; i < songListItems.length; i++) {
    }
  })
  var songListBtnL = songListWrapper.querySelector('.BtnL')
  var songListBtnR = songListWrapper.querySelector('.BtnR')
</script>
</body>
</html>
